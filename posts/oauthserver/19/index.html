<!doctype html><html dir=ltr lang=en data-theme class="html theme--light"><head><title>|
Implement an OAuth 2.0 Server (Part 19)</title><meta charset=utf-8><meta name=generator content="Hugo 0.109.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content><meta name=description content="The final part of our OAuth tutorial where we deploy to Azure."><link rel=stylesheet href=/scss/main.min.5794be192d21535bdd301561e043a96b6adbad2b5c08279deff459e4661c613f.css integrity="sha256-V5S+GS0hU1vdMBVh4EOpa2rbrStcCCed7/RZ5GYcYT8=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.31b0a1f317f55c529a460897848c97436bb138b19c399b37de70d463a8bf6ed5.css integrity="sha256-MbCh8xf1XFKaRgiXhIyXQ2uxOLGcOZs33nDUY6i/btU=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/fontawesome.min.7d272de35b410fb165377550cdf9c4d3a80fbbcc961e111914e4d5c0eaf5729f.css integrity="sha256-fSct41tBD7FlN3VQzfnE06gPu8yWHhEZFOTVwOr1cp8=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/solid.min.55d8333481b07a08e07cf6f37319753a2b47e99f4c395394c5747b48b495aa9b.css integrity="sha256-VdgzNIGwegjgfPbzcxl1OitH6Z9MOVOUxXR7SLSVqps=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/regular.min.a7448d02590b43449364b6b5922ed9af5410abb4de4238412a830316dedb850b.css integrity="sha256-p0SNAlkLQ0STZLa1ki7Zr1QQq7TeQjhBKoMDFt7bhQs=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/brands.min.9ed75a5d670c953fe4df935937674b4646f92674367e9e66eb995bb04e821647.css integrity="sha256-ntdaXWcMlT/k35NZN2dLRkb5JnQ2fp5m65lbsE6CFkc=" crossorigin=anonymous type=text/css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=canonical href=https://0xnf.github.io/posts/oauthserver/19/><script type=text/javascript src=/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js integrity="sha256-+RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/anatole-theme-switcher.min.d6d329d93844b162e8bed1e915619625ca91687952177552b9b3e211014a2957.js integrity="sha256-1tMp2ThEsWLovtHpFWGWJcqRaHlSF3VSubPiEQFKKVc=" crossorigin=anonymous></script><meta name=twitter:card content="summary"><meta name=twitter:title content="Implement an OAuth 2.0 Server (Part 19)"><meta name=twitter:description content="The final part of our OAuth tutorial where we deploy to Azure."><meta property="og:title" content="Implement an OAuth 2.0 Server (Part 19)"><meta property="og:description" content="The final part of our OAuth tutorial where we deploy to Azure."><meta property="og:type" content="article"><meta property="og:url" content="https://0xnf.github.io/posts/oauthserver/19/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-06-18T18:11:56-07:00"><meta property="article:modified_time" content="2018-06-18T18:11:56-07:00"><meta property="og:see_also" content="https://0xnf.github.io/posts/oauthserver/01/"><meta property="og:see_also" content="https://0xnf.github.io/posts/oauthserver/02/"><meta property="og:see_also" content="https://0xnf.github.io/posts/oauthserver/03/"><meta property="og:see_also" content="https://0xnf.github.io/posts/oauthserver/04/"><meta property="og:see_also" content="https://0xnf.github.io/posts/oauthserver/05/"><meta property="og:see_also" content="https://0xnf.github.io/posts/oauthserver/06/"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Implement an OAuth 2.0 Server (Part 19)","headline":"Implement an OAuth 2.0 Server (Part 19)","alternativeHeadline":"","description":"
      The final part of our OAuth tutorial where we deploy to Azure.


    ","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/0xnf.github.io\/posts\/oauthserver\/19\/"},"author":{"@type":"Person","name":""},"creator":{"@type":"Person","name":""},"accountablePerson":{"@type":"Person","name":""},"copyrightHolder":{"@type":"Person","name":""},"copyrightYear":"2018","dateCreated":"2018-06-18T18:11:56.00Z","datePublished":"2018-06-18T18:11:56.00Z","dateModified":"2018-06-18T18:11:56.00Z","publisher":{"@type":"Organization","name":null,"url":"https://0xnf.github.io/","logo":{"@type":"ImageObject","url":"https:\/\/0xnf.github.io\/favicon-32x32.png","width":"32","height":"32"}},"image":[],"url":"https:\/\/0xnf.github.io\/posts\/oauthserver\/19\/","wordCount":"1250","genre":["Security","Identity","Authentication","Authorization"],"keywords":["OAuth2.0","OpenIdConnect","Tutorial","CSharp",".NET Core"]}</script></head><body class=body><div class=wrapper><aside class=wrapper__sidebar><div class="sidebar
animated fadeInDown"><div class=sidebar__content><div class=sidebar__introduction><img class=sidebar__introduction-profileimage src=/ alt="profile picture"><div class=sidebar__introduction-title><a href=/></a></div><div class=sidebar__introduction-description><p></p></div></div><ul class=sidebar__list></ul></div><footer class="footer footer__sidebar"><ul class=footer__list><li class=footer__item>&copy;
2023</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script></div></aside><main class=wrapper__main><header class=header><div class="animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span></a><nav class=nav><ul class=nav__list id=navMenu></ul><ul class="nav__list nav__list--end"><li class=nav__list-item><div class=themeswitch><a title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></li></ul></nav></div></header><div class="post
animated fadeInDown"><div class=post__content><h1>Implement an OAuth 2.0 Server (Part 19)</h1><p>Welcome to the nineteenth and final part of a series of posts where we will implement an OAuth 2 Server using <a href=https://github.com/aspnet-contrib/AspNet.Security.OpenIdConnect.Server>AspNet.Security.OpenIdConnectServer</a>.</p><h1 id=pushing-to-azure>Pushing to Azure</h1><p>To finish off this project, we&rsquo;ll be deploying our application to the free tier of Microsoft Azure. We&rsquo;ll be taking most of our cues from Nate Barbettini&rsquo;s excellent <a href=https://nbarbettini.gitbooks.io/little-asp-net-core-book/content/chapters/deploy-the-application/deploy-to-azure.html>Little ASP.NET Core Book</a></p><p>For the purposes of this tutorial, I assume you already have a Microsoft account and are willing to use it to deploy to the cloud.</p><h1 id=deployment-file>Deployment File</h1><p>Like any other git tool that builds, like Travis or Circle CI, we need a file that describes what to build and what to output. This becomes doubly useful if you have separate test projects as part of your solution, like we probably should have done.</p><p>At the root of your solution, in our case the base <code>OAuthTutorial/</code> folder, create a <code>.deployment</code> file and open it in your editor of choice. Make sure no file extensions like <code>.txt</code> were added. This is your standard extensionless dot-file.</p><p><code>.deployment</code>:</p><pre tabindex=0><code>[config]
project = OAuthTutorial/OAuthTutorial.csproj
</code></pre><h1 id=azure-login>Azure Login</h1><p>If you&rsquo;re already familiar with the Azure cli process, you can skip this step. Otherwise, you&rsquo;ll need to login first.</p><p>Type this and then follow the prompts, which involve opening your browser and typing in a code, in a sort of reverse two-factor authentication step.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>az login
</span></span></code></pre></div><h1 id=azure-creation>Azure Creation</h1><p>We&rsquo;re going to create four things on Azure:</p><ol><li>a Resource Group</li><li>an App Service plan</li><li>a Web App template</li><li>and an Azure User</li></ol><p>For the sake of the tutorial, we&rsquo;ve chosen <code>OAuthTutorial</code> as our name for the project and the final deployed website - but you won&rsquo;t be able to do so since websites on azure are globally unique. You should choose a different root name for your azure website. If you&rsquo;re feeling uncreative, you can call it <code>OAuthTutorial2</code> or something of a similar creative caliber.</p><p>Be sure to properly suffix each of these items with <code>Group</code>, or <code>Plan</code>accordingly. You can leave <code>App</code> off, because the final Url will be prettier that way. Either way, you don&rsquo;t have to this, but it&rsquo;s good practice.</p><h2 id=resource-group-creation>Resource Group Creation</h2><p>If you&rsquo;ve never done this before, or you want to segregate this application from your other resources, then we&rsquo;ll need to create <code>resource group</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>az group create -l eastus -n OAuthTutorialGroup
</span></span></code></pre></div><p>You should see a returned JSON object similar to the object shown below:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;id&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;/subscriptions/xxx-xxx-xxx-xxx-xxx/resourceGroups/OAuthTutorialGroup&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;location&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;eastus&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;managedBy&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;name&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;OAuthTutorialGroup&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;properties&#34;</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;provisioningState&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Succeeded&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;tags&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Consult this map here for a list of locations better suited to you. <a href=https://azure.microsoft.com/en-ca/global-infrastructure/regions/>https://azure.microsoft.com/en-ca/global-infrastructure/regions/</a></p><p>Or you can use the command: <code>az account list-locations</code></p><h2 id=service-plan-creation>Service Plan Creation</h2><p>We&rsquo;ll be using the <code>F1</code> tier, which is the Azure free tier.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>az appservice plan create -g OAuthTutorialGroup -n OAuthTutorialPlan --sku F1
</span></span></code></pre></div><p>If successful, meaning that the name you&rsquo;ve chosen is available, you&rsquo;ll get back another JSON object that looks something like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;adminSiteName&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;appServicePlanName&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;OAuthTutorialPlan&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;geoRegion&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;East US&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;hostingEnvironmentProfile&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;id&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;/subscriptions/xxx-xxx-xxx-xxx-xxx/resourceGroups/OAuthTutorialGroup/providers/Microsoft.Web/serverfarms/OAuthTutorialPlan&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;isSpot&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;kind&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;app&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;location&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;East US&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;maximumNumberOfWorkers&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;name&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;OAuthTutorialPlan&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;numberOfSites&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;perSiteScaling&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;provisioningState&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Succeeded&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;reserved&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;resourceGroup&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;OAuthTutorialGroup&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;sku&#34;</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;capabilities&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;capacity&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;family&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;F&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;locations&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;name&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;F1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;size&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;F1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;skuCapacity&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;tier&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Free&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;spotExpirationTime&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;status&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Ready&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;subscription&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;xxx-xxx-xxx-xxx-xxx&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;tags&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;targetWorkerCount&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;targetWorkerSizeId&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;type&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Microsoft.Web/serverfarms&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;workerTierName&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=web-app-creation>Web App Creation</h2><p>If the resource group and service plan creation succeeded, we can create the repository for our web app:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>az webapp create -g OAuthTutorialGroup -p OAuthTutorialPlan -n OAuthTutorial
</span></span></code></pre></div><p>You&rsquo;ll get back a huge JSON object and your website should be up and running at <a href=http://oauthtutorial.azurewebsites.net>http://oauthtutorial.azurewebsites.net</a> :</p><p><img src=/oauthserver/part19/empty.png alt="An empty website"></p><h2 id=create-the-azure-user>Create the Azure user</h2><p>You&rsquo;ll need to create an account to administer the web app. This is separate from the login process from earlier.<br>This is the account that will be responsible for pushing the deployment.</p><p>On my own machine, I named my user <code>admin</code> because I was out of ideas.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>user<span style=color:#f92672>=</span>YOUR_DESIRED_USERNAME_HERE
</span></span><span style=display:flex><span>az webapp deployment user set --user-name $user
</span></span></code></pre></div><p>Be aware that Azure&rsquo;s password policy is the following: <code>The password should be at least eight characters long and must contain lowercase and uppercase letters and numbers.</code></p><h1 id=azure-deployment>Azure Deployment</h1><h2 id=git-repo-generation>Git Repo Generation</h2><p>We need to create a git deploy location for our app. We can generate one with this command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>az webapp deployment source config-local-git -g OAuthTutorialGroup -n OAuthTutorial --out tsv
</span></span></code></pre></div><p>We get back something like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>https://admin@oauthtutorial.scm.azurewebsites.net/OAuthTutorial.git
</span></span></code></pre></div><p>We&rsquo;ll use this to set an upstream remote our git repository.</p><h2 id=set-git-upstream>Set Git Upstream</h2><p>Using the returned url, use the command below to set the upstream repo. Replace <code>&lt;paste></code> with the value returned to you from the previous step.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git remote add azure &lt;paste&gt;
</span></span></code></pre></div><h2 id=git-deploy>Git Deploy</h2><p>finally, just do a git push and watch the magic happen:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git push azure master
</span></span></code></pre></div><h2 id=site-deployed>Site Deployed</h2><p>After a fairly lengthy period of time, you should be able to see your site running on your domain.</p><p>In our case, you can see the demo application at <a href=http://oauthtutorial.azurewebsites.net>http://oauthtutorial.azurewebsites.net</a></p><p><img src=/oauthserver/part19/full.png alt="Our application, running in the cloud"></p><h1 id=end-notes>End Notes</h1><p>There are huge number of other methods we could have implemented in our OAuth provider class. ASOS supports endpoints like <code>logout</code>, or <code>revoke</code> or <code>userinfo</code>, but not every application implements those. Or, if they are implemented, they might not be done the way ASOS is expecting. Our application is the same way.</p><p>As far <code>logout</code> goes, we only support that by the cookie identification system that came standard with our project setup - there is no need to introduce another endpoint or handler for this action, especially because what would it mean to logout someone using access tokens? When a user logs in with a token, we don&rsquo;t set any session ids, nor do we record their status in some data-store as being &rsquo;logged in&rsquo;. There&rsquo;s no concept of logout that readily applies to our token system. Some other systems may do more in that respect than ours, but we don&rsquo;t need to worry about this one.</p><p>User info is pretty simple to implement - we already did it earlier sections, we just never got around to telling ASOS about it. We&rsquo;ll just set the <code>options.UserInfoEndpoint</code> to <code>/api/v1/me</code> and be on our merry way.</p><h1 id=wrap-up>Wrap Up</h1><p>The OpenIdConnectServer library is deep enough to handle nearly anything you need when it comes to token based authentication. But that also means it carries with it some deep complexity. I had quite the struggle trying to implement the server at the beginning when I needed it, and it took me months of on and off tinkering to figure it out. I hope this guide will be useful to people who may be in the same boat, and that maybe the documentation of my struggles will help you avoid the steep learning curve.</p><p>Also, I&rsquo;d like to thank Kevin Chalet, the main developer and maintainer of the library - not only is he super helpful and answers nearly every question thrown at him on the <a href=https://github.com/aspnet-contrib/AspNet.Security.OpenIdConnect.Server>GitHub repo</a> for the project, he&rsquo;s also open to adding things to the library to make it more useful. For instance, not even 18 hours after I opened an issue about non-expiring tokens, he had a fix checked into the dev branch implementing it. It is &ldquo;not a good idea&rdquo; he said, but it has valid usecases so he added it.</p><p>So, thanks Kevin, for a very powerful, if very complicated library.</p><p>Also thanks to everyone else who I cited in the relevant posts that helped me out at various points in the way. We never interacted, but your blog posts and stack overflow questions were invaluable.</p><h3>Posts in this series</h3><ul><li><a href=/posts/oauthserver/19/>Implement an OAuth 2.0 Server (Part 19)</a></li><li><a href=/posts/oauthserver/18/>Implement an OAuth 2.0 Server (Part 18)</a></li><li><a href=/posts/oauthserver/17/>Implement an OAuth 2.0 Server (Part 17)</a></li><li><a href=/posts/oauthserver/16/>Implement an OAuth 2.0 Server (Part 16)</a></li><li><a href=/posts/oauthserver/15/>Implement an OAuth 2.0 Server (Part 15)</a></li><li><a href=/posts/oauthserver/14/>Implement an OAuth 2.0 Server (Part 14)</a></li><li><a href=/posts/oauthserver/13/>Implement an OAuth 2.0 Server (Part 13)</a></li><li><a href=/posts/oauthserver/12/>Implement an OAuth 2.0 Server (Part 12)</a></li><li><a href=/posts/oauthserver/11/>Implement an OAuth 2.0 Server (Part 11)</a></li><li><a href=/posts/oauthserver/10/>Implement an OAuth 2.0 Server (Part 10)</a></li><li><a href=/posts/oauthserver/09/>Implement an OAuth 2.0 Server (Part 09)</a></li><li><a href=/posts/oauthserver/08/>Implement an OAuth 2.0 Server (Part 08)</a></li><li><a href=/posts/oauthserver/07/>Implement an OAuth 2.0 Server (Part 07)</a></li><li><a href=/posts/oauthserver/06/>Implement an OAuth 2.0 Server (Part 06)</a></li><li><a href=/posts/oauthserver/05/>Implement an OAuth 2.0 Server (Part 05)</a></li><li><a href=/posts/oauthserver/04/>Implement an OAuth 2.0 Server (Part 04)</a></li><li><a href=/posts/oauthserver/03/>Implement an OAuth 2.0 Server (Part 03)</a></li><li><a href=/posts/oauthserver/02/>Implement an OAuth 2.0 Server (Part 02)</a></li><li><a href=/posts/oauthserver/01/>Implement an OAuth 2.0 Server (Part 01)</a></li></ul></div><div class=post__footer><span><a class=category href=/categories/security/>Security</a><a class=category href=/categories/identity/>Identity</a><a class=category href=/categories/authentication/>Authentication</a><a class=category href=/categories/authorization/>Authorization</a></span>
<span><a class=tag href=/tags/oauth2%2e0/>OAuth2.0</a><a class=tag href=/tags/openidconnect/>OpenIdConnect</a><a class=tag href=/tags/tutorial/>Tutorial</a><a class=tag href=/tags/csharp/>CSharp</a><a class=tag href=/tags/%2enet-core/>.NET Core</a></span></div></div></main></div><footer class="footer footer__base"><ul class=footer__list><li class=footer__item>&copy;
2023</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script></body></html>